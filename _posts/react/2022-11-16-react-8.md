---
layout: single
title: "[React] React에서 폼 다루기"
folder: "react"
categories:
  - React
tags: [React]

author_profile: true
sidebar:
  nav: "docs"

toc: true
toc_label: "목록"
toc_icon: "bars"
toc_sticky: true
date: 2022-11-16

---

# 1. React에서 폼을 다루기 위한 권장 방법
- 일반적인 HTML 에서 입력 요소를 다룰 때는 DOM을 저장소로 활용
  ∴ 사용자 입력에 의해 요소의 상태 변경
- React에서는 선언형 스타일을 사용하므로 입력이 동적이어야 함
  ∴ React의 render()메서드를 폼 요소의 데이터를 포함한 실제 DOM에 최대한 밀접하게 유지하는 방법 사용
- 즉, **내부 상태와 뷰를 동기화** 하는 것이 가장 좋음
  > 1. render()에서 상태 값을 이용해 엘리먼트 정의  
  > 2. onChange를 이용해 폼 요소에 발생하는 변경 사항 감지  
  > 3. 이벤트 핸들러에서 내부 상태 갱신  
  > 4. 새로운 값이 상태에 저장되면 새로운 render()가 실행되어 뷰 갱신  
  > : 이를 **단방향 바인딩**이라고 함!
- 단방향 바인딩 : 상태가 뷰를 갱신하는 것이 전부!
- 이러한 이유로 폼을 다룰 때 권장하는 방식은 제어 컴포넌트 → 컴포넌트 내부 상태와 뷰를 항상 동기화

<br />

## React에서 폼과 이벤트 정의하기

- 간단한 UI에서는 폼 요소를 따로 사용해도 괜찮지만, 여러 요소의 그룹으로 이루어진 단일 페이지처럼 복잡한 UI를 다룰 때는 각 그룹을 `<form>` 으로 구분하는 것이 현명한 방법
- HTML의 폼에 적용할 수 있는 방법은 React의 `<form>`요소에도 적용 가능  <br />

- **React가 지원하는 폼 요소를 위한 세가지 이벤트**
  - **onChange** : 폼의 입력 요소에 변경 생기면 발생
  - **onInput** : `<textarea>`, `<input>`요소의 값이 변경될 때 발생 (비추천)
  - **onSubmit** : 폼 제출 시 발생 → 주로 `ENTER`
-  세 가지 이벤트에 덧붙여 표준 React 이벤트도 사용 가능 
-  폼 이벤트 사용 시 input 요소 그룹같은 전체 폼에서 특정 이벤트를 감지해야 하는 경우 편리
<br />

## 폼 요소 정의하기
> HTML의 거의 모든 입력 영역 사용해 구현 가능하며,  
> React는 변경 가능한 속성인 value, checked, selected를 두어 폼 요소를 특별하게 다룬다.
> &nbsp; **_(변경 가능한 속성 = 대화형 속성)_**

 - **`<input>` 요소**
    : type 속성에 입력하는 값에 따라 여러 가지 방식의 입력 영역을 렌더링할 수 있음
    - text : 일반적인 텍스트 입력 방법
    - password : 보안을 위해 입력 내용이 가려진 텍스트 영역
    - radio : 라디오 버튼으로 라디오 버튼 그룹을 만들 때는 name 속성에 같은 값을 입력
    - checkbox : 체크박스 요소로 체크박스 그룹을 만들 때는 name 속성에 같은 값을 입력
    - button : 버튼 폼 요소  
    <br />
    체크박스와 라디오버튼을 제외한 모든 `<input>`요소의 주요 용도는 요소의 변경 가능한 **대화형 속성을 사용하는 것**이다. <br />
    value를 변경 가능한 속성으로 사용하지 않는 두 가지 예외에 체크박스와 라디오 박스가 있는데, 이 두 유형은 요소당 값을 하나만 가지므로 값이 변경되지 않지만 checked 또는 selected 속성이 변경된다.<br /><br /> 
    라디오 버튼에는 선택 값이 하나이므로 상태에서 할당할 필요가 없기에 빈 객체를 사용할 수 있다.
    하지만 **체크박스는 선택 값이 여러 가지이므로 교체가 아닌 병합**을 해야 한다. 
      - 상태는 직접 변경하지 않으므로 **Object.assign()**을 이용해 값을 할당하는 것(복제 : cloning)이 좋음
      - JSON 이용 : **cloneData = JSON.parse(JSON.stringify(originalData))** → 덜 효과적
      - 상태에서 객체 대신 배열을 사용하는 경우 값을 할당해야 한다면 **clonedArray = Array.from(originArray) 또는 clonedArray = originArray.slice()**를 사용
      
        <br />

 - **`<textarea>` 요소**

    - 일반적인 HTML에서는 innerHTML(자식)을 사용하여 값을 보여줌
    - 반면 **React는 value 속성을 사용(권장)**하는데, <br />
      `<textarea>`에 자식이 있는 경우에는 자식으로 입력된 텍스트를 기본값으로 사용(비권장)

      <br />

 - **`<select>`와 `<option>` 요소**
    - 사용자가 미리 입력된 값 목록에서 한가지 또는 그 이상의 값을 선택할 수 있는 UX 제공
    - 일반적인 HTML에서는 선택된 요소의 순서를 확인하기 위해 selectDOMNode.selectedIndex를 사용
    - React에서는 `<select>`에 value 속성을 사용
    - 다중 선택 요소를 사용해야 하는 경우 
      - JSX를 작성할 떄 별도의 값을 주지 않고 multiple 속성만 작성하면 React가 true로 처리
      - 명시적으로 multiple={true}라고 값을 주어도 됨
    - 여러 항목을 기본으로 선택하려면 `<select>`의 value 속성에 배열로 값 전달

<br />
 
## 변경 감지하기
- 폼 요소의 변경을 감지할 때는 onChange 이벤트 리스너 이용
- onChange 이벤트를 발생시키는 요인은 요소마다 차이가 있음
  - `<input>`, `<textarea>`, `<select>` : value가 변경될 때
  - `<input>` 체크박스와 라디오 버튼 : checked가 변경될 때
- onChange를 정의하지 않고 value만 입력 시 요소를 readOnly로 만듦
- 하지만 readOnly가 필요한 경우는 명시적으로 설정해주는 것이 좋음  
   → **readOnly={true}** 또는 **reacOnly**만 작성해도 true로 간주

<br /><br />

# 2. 폼을 다루는 다른 방법
> 서버에 전달한 간단한 폼을 만들 때는 비제어 컴포넌트가 유용하다.  
> 비제어 컴포넌트를 사용하려면 폼에 제출 이벤트를 정의해야 하며 이벤트 핸들러를 추가한다.  
> 이후에는 변경을 감지하는 방식과 변경을 감지하지 않는 방식 중 하나를 선택할 수 있다.

<br />

## 비제어 엘리먼트에서 변경 감지하기
- React에서 비제어 컴포넌트는 value 속성을 React에서 설정하지 않는 것을 의미
- 컴포넌트의 내부 값 또는 상태가 컴포넌트의 표현 또는 뷰와 서로 다를 수 있음
- 비제어 컴포넌트를 사용하는 경우에는 사용자가 폼 요소에 무엇이든 입력할 수 있으므로 뷰와 상태 차이가 발생
- 비제어 컴포넌트에서 변경을 감지하려면 onChange를 사용 
- React는 onChange를 통해 새로 입력된 값을 감지해서 상태에 저장만 함

<br />

## 비제어 엘리먼트에서 이벤트를 감지하지 않는 경우
- 폼을 제출할 때처럼 모든 값이 필요한 경우?
   비제어 엘리먼트에서 변경을 감지하지 않기로 하면 데이터는 DOM에 그대로 남고 참조를 통해 데이터를 자바스크립트 객체로 가져올 수 있음
- 즉, 변경ㅇ르 감지하지 않고 비제어 엘리먼트를 사용하기 위해서는 다른 엘리먼트에 접근해서 데이터를 가져올 수 있는 방법이 필요

<br />

## 값에 참조로 접근하기
- 비제어 컴포넌트를 다룰 때는 onChange 같은 이벤트를 이용해 입력을 감지하지 않으므로 refs를 통해 참조로 값에 접근
 - React 엘리먼트를 적절히 정의한다면 뷰(DOM)의 상태와 내부 상태가 동기화되므로 참조를 사용할 필요가 거의 없음
 - 참조를 사용하면 React 컴포넌트의 DOM 요소 또는 노드를 가져올 수 있는데 변경을 감지하지 않고 폼 요소의 값을 가져와야 할 때 유용

 <br />

 - **참조를 사용하기 위해 진행해야 하는 두가지 작업**
    1. render() 메서드에서 반환하는 엘리먼트의 ref 속성에 문자열을 전달하는 경우 **카멜 표기법**으로 작성
    2. 지정한 이름으로 다른 메서드에서 DOM 인스턴스에 접근 → **this.refs.NAME**
 - 입력 값을 확인 하기위해서는 DOM 노드를 가져오는 것이 유용 → **ReactDOM.findDOMNode(this.refs.NAME)**

 <br />

- 참조를 사용하는 것은 비제어 엘리먼트를 사용하는 경우처럼 흔치 않은 경우
- 대부분의 경우 제어 엘리먼트에서는 참조를 사용하는 대신 컴포넌트 상태를 사용
    

<br />

## 기본값 설정하기
 - 일부 영역에 기존 데이터를 입력해야 할 때 일반적인 HTML이라면 폼 영역에 value를 작성하여 값 변경
 - React는 value, checked, seeleted를 뷰와 엘리먼트 내부 상태에서 일관되게 유지
 - 폼이 이전에 저장된 경우 사용자를 위해 `<input>` 영역을 미리 채워놓기 위해 폼 요소에 **defaultValue** 속성 사용  
     - defaultValue 대신 value 속성(value="JSX") 사용 시 이 엘리먼트는 readOnly
     - dafulatValue 기능은 주로 비제어 컴포넌트와 함꼐 사용
     - 참조를 사용하면 이 기능을 제어 컴포넌트나 다른 경우에도 사용 가능
     - 제어 컴포넌트에서는 생성자에서 기본값을 상태로 설정할 수 있으므로 크게 중요하지 않음

  <br /><br />

---

![리액트 교과서](https://shopping-phinf.pstatic.net/main_3243613/32436139938.20220527055911.jpg?type=w300)

아자트 마르단, 「리액트 교과서」, 곽현철 옮김, 길벗, 2018
